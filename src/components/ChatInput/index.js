import { Button } from "@mui/material";
import { Firebase } from "firebase/app";
import {
	addDoc,
	doc,
	collection,
	serverTimestamp,
	setDoc,
} from "firebase/firestore";
import React, { useState } from "react";
import { db } from "../../firebase";
import { ChatInputContainer } from "./ChatInput.styles";

function ChatInput({ channelName, channelId, chatRef }) {
	const [input, setInput] = useState("");

	const sendMessage = (e) => {
		e.preventDefault();
		if (!channelId) {
			return false;
		}

		addDoc(collection(db, "rooms", channelId, "messages"), {
			message: input,
			timestamp: serverTimestamp(),
			user: "Solomon Ojigbo",
			userImage:
				"data:image/jpeg;base64,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",
		}).catch((e) => {
			console.log(e);
		});
		chatRef?.current?.scrollIntoView({
			behavior: "smooth",
		});
		setInput("");
	};

	return (
		<ChatInputContainer>
			<form>
				<input
					value={input}
					onChange={(e) => setInput(e.target.value)}
					placeholder={`Message #${channelName}`}
				/>
				<Button hidden type="submit" onClick={sendMessage}>
					SEND
				</Button>
			</form>
		</ChatInputContainer>
	);
}

export default ChatInput;
